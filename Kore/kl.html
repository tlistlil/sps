<!DOCTYPE html>
<html lang='ko'>
<head>
  <meta charset='utf-8'>
  <meta name='theme-color' content='#000'>
  <meta name='viewport'	content='width=device-width,initial-scale=1.0,minimum-scale=1.0'>
  <meta name='description' content='keyboard for Old Hangul,å¤ãƒãƒ³ã‚°ãƒ«å…¥åŠ›æ”¯æ´ãƒ„ãƒ¼ãƒ«,ĞºĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ğ° Ğ´Ğ»Ñ Ğ´Ñ€ĞµĞ²Ğ½ĞµĞºĞ¾Ñ€ĞµĞ¹ÑĞºĞ¾Ğ³Ğ¾ ÑĞ·Ñ‹ĞºĞ°'>
  <title>ì˜›í•œê¸€ ìíŒ</title>
  <link rel='icon' href='../ico/Kore.ico'>
  <link rel='stylesheet' href='../css/komuna.css'>
  <script charset='UTF-8' src='../js/komuna.js'></script>
  <style>
	#montri{height:45vh;width:95vw;max-width:600px;
		font-size:2em;line-height:1.5;}
	#klavaro {
		height:30vh;max-height:500px;width:100%;max-width:600px;
		z-index:1;
		margin-right:10px;
		table-layout:fixed;
		border-collapse:separate;border-spacing:4px;
		background:hsl(0,0%,60%);
	}
	td{background:hsl(180,100%,10%);text-align:center;cursor:pointer;}
	td.hejma{background:hsl(30,100%,10%);}
	td.tajpinta{background:hsl(40,100%,50%);}
	#montri,#klavaro{font-family:'Gentium Plus','KoPubWorld Batang Pro','IPAexæ˜æœ',serif;}
	</style>
</head>
<body class='Kore'>

<textarea id=montri autofocus></textarea>
<nav>
	<input type='checkbox' id='kunmeti' checked>
	<label for='kunmeti'>å®Œæˆå‹ë¥¼ ä½¿ç”¨í•¨</label> ï¼
	<a href='kl_not.html'>æŒ‡å—</a>
</nav>

<table id="klavaro" border="1">
	<tr><td></td><td colspan=2 id='kl1'></td><td colspan=2 id='kl2'></td><td colspan=2 id='kl3'></td><td colspan=2 id='kl4'></td><td colspan=2 id='kl5'></td><td colspan=2 id='kl6'></td><td colspan=2 id='kl7'></td><td colspan=2 id='kl8'></td><td colspan=2 id='kl9'></td><td colspan=2 id='kl10'></td><td colspan=2 id='kl11'></td><td colspan=2 id='kl12'></td><td colspan=2 id='kl13'></td></tr>
	<tr><td colspan="2" id="kl0"></td><td colspan=2 id='kl14'></td><td colspan=2 id='kl15'></td><td colspan=2 id='kl16'></td><td colspan=2 id='kl17'></td><td colspan=2 id='kl18'></td><td colspan=2 id='kl19'></td><td colspan=2 id='kl20'></td><td colspan=2 id='kl21'></td><td colspan=2 id='kl22'></td><td colspan=2 id='kl23'></td><td colspan=2 id='kl24'></td><td colspan=2 id='kl25'></td><td></td></tr>
	<tr><td colspan="3" id="seruro">ğŸ”’</td><td colspan=2 id='kl26'></td><td colspan=2 id='kl27'></td><td colspan=2 id='kl28'></td><td colspan=2 id='kl29'></td><td colspan=2 id='kl30'></td><td colspan=2 id='kl31'></td><td colspan=2 id='kl32'></td><td colspan=2 id='kl33'></td><td colspan=2 id='kl34'></td><td colspan=2 id='kl35'></td><td colspan=2 id='kl36'></td><td colspan=2 id='kl37'></td></tr>
	<tr><td colspan="4" id="sup">â‡‘</td><td colspan=2 id='kl38'></td><td colspan=2 id='kl39'></td><td colspan=2 id='kl40'></td><td colspan=2 id='kl41'></td><td colspan=2 id='kl42'></td><td colspan=2 id='kl43'></td><td colspan=2 id='kl44'></td><td colspan=2 id='kl45'></td><td colspan=2 id='kl46'></td><td colspan=2 id='kl47'></td><td colspan=2 id='kl48'></td><td></td></tr>
	<tr><td colspan="5" id="AltGr">AltGr</td><td colspan="8" id="spaco">â£</td><td colspan="2" id="h">â†</td><td colspan="2" id="j">â†“</td><td colspan="2" id="k">â†‘</td><td colspan="2" id="l">â†’</td><td colspan="3" id="x">BS</td><td colspan="3" id="o">â†²</td></tr>
</table>

<script>
//è®Šæ•¸ï¼ˆå…¨é«”ï¼‰
let cxiSup=cxiAltGr=cxiSer=0; //sup,AltGr,spacoæ™‚ä½¿ç”¨
let klavoj=malsup="\u302e1234567890-=ãƒ¼á„‡á„Œá„ƒá„€á„‰á…­á…§á…£á…¢á…¦[]á„†á„‚á„‹á„…á„’á…©á…¥á…¡á…µã€®'\ á„á„á„á„‘á…²á…®á…³,./ ";
let sup = "~!@#$%^&*()_+ á„ˆá„á„„á„á„Šá…­á…§á…£á…¤á…¨{}á…€á„‚á…Œá„…á…™á…©á…¥á†á…µã€¯\"|á„¼á„¾á…á…á…”á…•á…³<>? ";
let AltGr = klavoj;
let supAltGr = sup;
let kodo = ["Backquote","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal","IntlYen","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","Backslash","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","IntlRo"]; //ç‰©ç†éµç›¤ã®e.codeæª¢ç´¢ç”¨
const klavaro = ById("klavaro");
const montri=ById('montri');
//è®Šæ•¸ï¼ˆå…¨é«”ï¼‰ã“ã“ã¾ã§

//æ–‡å­—å…¥åŠ›ã‚¤ãƒ™ãƒ³ãƒˆ
//ç‰©ç†éµç›¤ã‹ã‚‰
document.addEventListener("keydown", function(e){
	//æ©Ÿèƒ½éµè™•ç†
	if(e.ctrlKey && e.key!='Shift')return;
	if(e.key=='Shift'){supre();return;}
	if(e.key=='Process')return;//å’Œæ–‡å…¥åŠ›ä¸­ã¯ã‚ªãƒ•
	switch(e.code){
		case'AltRight':	AltGre(); return;
		case'Space':	spaco(); return;
		case'AltLeft':
		case'CapsLock':
		case'ArrowLeft':case'ArrowDown':case'ArrowUp':case'ArrowRight':
		case'Backspace':case'Delete':case'End':
		case'Enter':
		case'Escape':
		case'F1':case'F2':case'F3':case'F4': case'F5': case'F6':
		case'F7':case'F8':case'F9':case'F10':case'F11':case'F12':
		case'Home':
		case'KanaMode':
		case'MetaLeft':
		case'PageDown':case'PageUp':
		case'Tab':
		case'WakeUp':return;
		default:break;
	}
	let k = Object.keys(kodo).filter(function(k) {return kodo[k] == e.code})[0];
	eniri(k);	//å…¥åŠ›
	//montriãƒ•ã‚©ãƒ¼ã‚«ã‚¹æ™‚ã®ç³»çµ±ã‹ã‚‰ã®äºŒé‡å…¥åŠ›é™¤å»
	if(document.activeElement.id=="montri") dedouble();
}, false);
//ç‰©ç†éµç›¤ã®Shift,AltGrè§£é™¤
document.addEventListener("keyup", function(e){
	if(e.key=="Shift"){malsupre();return;}
	if(e.code=="AltRight"){AltGre();return;}
}, false);
//å‡æƒ³éµç›¤ã‹ã‚‰
klavaro.addEventListener("click", function(e){
	let k = e.target.id; //æŠ¼ã—ãŸéµã®IDå–å¾—
	//æ©Ÿèƒ½éµè™•ç†
	switch(k){
		case"sup":	supre_malsupre();return;
		case"AltGr":AltGre();return;
		case"spaco":spaco();return;
		case"seruro":case"h":case"j":case"k":case"l":case"x":case"o":return;
		default:break;
	}
	eniri(k.substr(2));//IDã‹ã‚‰æ•¸å­—ã‚’åˆ‡å‡ºã—å…¥åŠ›
	if(!cxiSer){
		klavo=malsup;cxiSup=cxiAltGr=0;
		klavaronSxangxi(klavo);
	}
}, false);
//ä»–ã®ã‚¿ãƒ–ã«ç§»ã£ãŸæ™‚Shiftã‚’è§£é™¤
document.addEventListener('visibilitychange',()=>{
	if(document.visibilityState==='hidden')malsupre();
});
window.addEventListener('blur',()=>{malsupre();});

//æ–‡å­—å…¥åŠ›å‡½æ•¸
let eniri=(k)=>{
	if(isNaN(k))return; //æœªå®šç¾©ã€æ–‡å­—åˆ—ç­‰ã‚’trueã§æ’é™¤
	let klk=ById("kl"+k);
	klk.classList.add('tajpinta');//è®Šè‰²è¡¨ç¤º
	//é…åˆ—ã‹å–®å­—åˆ—ã‹ã‚’åˆ¤åˆ¥ã—ã¦è¼¸å…¥æ–‡å­—ã‚’æŒ‡å®š
	let novkar=typeof(klavoj)=='string'?klavoj.charAt(k):klavoj[k];
	let montri=ById("montri");
	let pre=montri.value;let pos=montri.selectionStart;
	let prepre=pre.substr(0,pos);//ã‚«ãƒ¼ã‚½ãƒ«ã‚ˆã‚Šå‰ã®éƒ¨åˆ†
	let antaw=prepre.substr(pos-1,1);//ç›´å‰ã®æ–‡å­—
	let prepost=pre.substr(pos);//ã‚«ãƒ¼ã‚½ãƒ«ã‚ˆã‚Šå¾Œã®éƒ¨åˆ†
	let cxiKunmeti=ById('kunmeti').checked;
	if(antaw=="\u200c"){//éŸ³ç¯€é ­ãªã®ã§å…¥åŠ›å­—ã‚’å–®ç´”è¿½åŠ 
		//éŸ³ç¯€ã®å…¥åŠ›ãŒçµ‚ã¯ã£ãŸã®ã§å–®å­—è®Šæ›
		if(ById('kunmeti').checked)prepre=kunmeti(prepre);
		prepre=prepre.replace(/\u200c/g,'');//ä¸è¦ã«ãªã£ãŸé›¶å¹…éçµåˆå­ã‚’å‰Šé™¤
		novkar=V_V(novkar,1)//æ¯éŸ³å­—ã¯äº’æ›ç”¨å­—æ¯ã«è®Šæ›
		pos=prepre.length;
	}else{
		let antaw_novkar=kombini(antaw,novkar);//åˆæˆå­—æ¯ã‹ã©ã†ã‹ã‚’åˆ¤å®š
		if(antaw_novkar){//ç›´å‰ã®æ–‡å­—ã‚’åˆæˆå¾Œã®å­—ã«ç½®æ›
			prepre=prepre.substr(0,pos-1);
			novkar=antaw_novkar;
			pos--;
		}
	}
	//if(prepost)prepost="\u200c"+prepost;
	pos+=novkar.length;
	montri.value=prepre+novkar+prepost;
	montri.setSelectionRange(pos,pos);//ã‚«ãƒ¼ã‚½ãƒ«ä½ç½®è®Šæ›´
	setTimeout(function(){klk.classList.remove('tajpinta');},150);//è®Šè‰²æ™‚é–“é•·
}//function eniri çµ‚
let kombini=(antaw='',novkar='')=>{//ç›´å‰æ–‡å­—ã¨å…¥åŠ›æ–‡å­—ã‹ã‚‰åˆæˆå­—æ¯+Î±ã‚’è¿”ã™
	if(!antaw)return V_V(novkar);//å…ˆé ­ å…¥åŠ›ãŒéŸ»æ¯ãªã‚‰äº’æ›ç”¨å­—æ¯ã«è®Šæ›ã€ãã‚Œä»¥å¤–ã¯false
	antKod=antaw.codePointAt(0);
	novKod=novkar.codePointAt(0);
	if(0x1160<antKod&&antKod<0x11a8){//1 ç›´å‰ãŒéŸ»æ¯
		if(0x10ff<novKod&&novKod<0x1113){//11 å…¥åŠ›ãŒè²æ¯
			//å…¥åŠ›ã‚’çµ‚è²å­—ã«è®Šæ›´
			switch(novkar){
				case"á„€":return antaw+"á†¨";
				case"á„":return antaw+"á†©";
				case"á„‚":return antaw+"á†«";
				case"á„ƒ":return antaw+"á†®";
				case"á„…":return antaw+"á†¯";
				case"á„†":return antaw+"á†·";
				case"á„‡":return antaw+"á†¸";
				case"á„‰":return antaw+"á†º";
				case"á„Š":return antaw+"á†»";
				case"á„‹":return antaw+"á†¼";
				case"á„Œ":return antaw+"á†½";
				case"á„":return antaw+"á†¾";
				case"á„":return antaw+"á†¿";
				case"á„":return antaw+"á‡€";
				case"á„‘":return antaw+"á‡";
				case"á„’":return antaw+"á‡‚";
				case"á…€":return antaw+"á‡«";
				case"á…Œ":return antaw+"á‡°";
				case"á…™":return antaw+"á‡¹";
				default:return false;
			}
		}
		if(0x1160<novKod&&novKod<0x11a8){//12 ç›´å‰ãƒ»å…¥åŠ›ã¨ã‚‚éŸ»æ¯
			//åˆæˆéŸ»æ¯ï¼šå®Œæˆ
			if(antaw=="á…©"&&novkar=="á…¡")return "á…ª";
			if(antaw=="á…©"&&novkar=="á…¢")return "á…«";
			if(antaw=="á…©"&&novkar=="á…¢")return "á…«";
			if(antaw=="á…©"&&novkar=="á…µ")return "á…¬";
			if(antaw=="á…®"&&novkar=="á…¥")return "á…¯";
			if(antaw=="á…®"&&novkar=="á…¦")return "á…°";
			if(antaw=="á…®"&&novkar=="á…µ")return "á…±";
			if(antaw=="á…³"&&novkar=="á…µ")return "á…´";
			if(antaw=="á…¡"&&novkar=="á…©")return "á…¶";
			if(antaw=="á…¡"&&novkar=="á…®")return "á…·";
			if(antaw=="á…£"&&novkar=="á…©")return "á…¸";
			if(antaw=="á…£"&&novkar=="á…­")return "á…¹";
			if(antaw=="á…¥"&&novkar=="á…©")return "á…º";
			if(antaw=="á…¥"&&novkar=="á…®")return "á…»";
			if(antaw=="á…¥"&&novkar=="á…³")return "á…¼";
			if(antaw=="á…§"&&novkar=="á…©")return "á…½";
			if(antaw=="á…§"&&novkar=="á…®")return "á…¾";
			if(antaw=="á…©"&&novkar=="á…¥")return "á…¿";
			if(antaw=="á…©"&&novkar=="á…¦")return "á†€";
			if(antaw=="á…©"&&novkar=="á…¨")return "á†";
			if(antaw=="á…©"&&novkar=="á…©")return "á†‚";
			if(antaw=="á…©"&&novkar=="á…®")return "á†ƒ";
			if(antaw=="á…­"&&novkar=="á…£")return "á†„";
			if(antaw=="á…­"&&novkar=="á…¤")return "á†…";
			if(antaw=="á…­"&&novkar=="á…§")return "á††";
			if(antaw=="á…­"&&novkar=="á…©")return "á†‡";
			if(antaw=="á…­"&&novkar=="á…µ")return "á†ˆ";
			if(antaw=="á…®"&&novkar=="á…¡")return "á†‰";
			if(antaw=="á…®"&&novkar=="á…¢")return "á†Š";
			if(antaw=="á…¯"&&novkar=="á…³")return "á†‹";
			if(antaw=="á…®"&&novkar=="á…¨")return "á†Œ";
			if(antaw=="á…®"&&novkar=="á…®")return "á†";
			if(antaw=="á…²"&&novkar=="á…¡")return "á†";
			if(antaw=="á…²"&&novkar=="á…¥")return "á†";
			if(antaw=="á…²"&&novkar=="á…¦")return "á†";
			if(antaw=="á…²"&&novkar=="á…¥")return "á†‘";
			if(antaw=="á…²"&&novkar=="á…¨")return "á†’";
			if(antaw=="á…²"&&novkar=="á…®")return "á†“";
			if(antaw=="á…²"&&novkar=="á…µ")return "á†”";
			if(antaw=="á…³"&&novkar=="á…®")return "á†•";
			if(antaw=="á…³"&&novkar=="á…³")return "á†–";
			if(antaw=="á…´"&&novkar=="á…®")return "á†—";
			if(antaw=="á…µ"&&novkar=="á…¡")return "á†˜";
			if(antaw=="á…µ"&&novkar=="á…£")return "á†™";
			if(antaw=="á…µ"&&novkar=="á…©")return "á†š";
			if(antaw=="á…µ"&&novkar=="á…®")return "á†›";
			if(antaw=="á…µ"&&novkar=="á…³")return "á†œ";
			if(antaw=="á…µ"&&novkar=="á†")return "á†";
			if(antaw=="á†"&&novkar=="á…¥")return "á†Ÿ";
			if(antaw=="á†"&&novkar=="á…®")return "á† ";
			if(antaw=="á†"&&novkar=="á…µ")return "á†¡";
			if(antaw=="á†"&&novkar=="á†")return "á†¢";
			if(antaw=="á…¡"&&novkar=="á…³")return "á†£";
			if(antaw=="á…£"&&novkar=="á…®")return "á†¤";
			if(antaw=="á…§"&&novkar=="á…£")return "á†¥";
			if(antaw=="á…©"&&novkar=="á…£")return "á†¦";
			if(antaw=="á…©"&&novkar=="á…¤")return "á†§";
			//å…¥åŠ›éŸ»æ¯ã‚’äº’æ›ç”¨å­—æ¯ã«è®Šæ›
			return antaw+V_V(novkar);
		}
	}//ç›´å‰ãŒéŸ»æ¯ã®å ´åˆçµ‚ã¯ã‚Š
	if(0x314e<antKod&&antKod<0x318f){//2 ç›´å‰ãŒäº’æ›ç”¨å­—æ¯
		if(0x1160<novKod&&novKod<0x11a8){//å…¥åŠ›ãŒéŸ»æ¯
			//åˆæˆéŸ»æ¯ï¼ˆäº’æ›ç”¨ï¼‰
			if(antaw=="ã…—"&&novkar=="á…¡")return "ã…˜";
			if(antaw=="ã…—"&&novkar=="á…¢")return "ã…™";
			if(antaw=="ã…—"&&novkar=="á…µ")return "ã…š";
			if(antaw=="ã…œ"&&novkar=="á…¥")return "ã…";
			if(antaw=="ã…œ"&&novkar=="á…¦")return "ã…";
			if(antaw=="ã…œ"&&novkar=="á…µ")return "ã…Ÿ";
			if(antaw=="ã…¡"&&novkar=="á…µ")return "ã…¢";
			if(antaw=="ã…›"&&novkar=="á…£")return "ã†‡";
			if(antaw=="ã…›"&&novkar=="á…¤")return "ã†ˆ";
			if(antaw=="ã…›"&&novkar=="á…µ")return "ã†‰";
			if(antaw=="ã… "&&novkar=="á…§")return "ã†Š";
			if(antaw=="ã… "&&novkar=="á…¨")return "ã†‹";
			if(antaw=="ã… "&&novkar=="á…µ")return "ã†Œ";
			if(antaw=="ã†"&&novkar=="á…µ")return "ã†";
			//å…¥åŠ›éŸ»æ¯ã‚’äº’æ›ç”¨å­—æ¯ã«è®Šæ›
			return antaw+V_V(novkar);
		}
	}
	if(0x11a7<antKod&&antKod<0x1200){//3 ç›´å‰ãŒçµ‚è²
		if(0x1160<novKod&&novKod<0x11a8){//å…¥åŠ›ãŒéŸ»æ¯
			//ç›´å‰å­—ã‚’åˆè²ã«æˆ»ã™ï¼šã•ã—ã‚ãŸã‚Šå–®éŸ³ã®ã¿
			switch(antaw){
				case"á†¨":return "á„€"+novkar;
				case"á†©":return "á„"+novkar;
				case"á†«":return "á„‚"+novkar;
				case"á†®":return "á„ƒ"+novkar;
				case"á†¯":return "á„…"+novkar;
				case"á†·":return "á„†"+novkar;
				case"á†¸":return "á„‡"+novkar;
				case"á†º":return "á„‰"+novkar;
				case"á†»":return "á„Š"+novkar;
				case"á†¼":return "á„‹"+novkar;
				case"á†½":return "á„Œ"+novkar;
				case"á†¾":return "á„"+novkar;
				case"á†¿":return "á„"+novkar;
				case"á‡€":return "á„"+novkar;
				case"á‡":return "á„‘"+novkar;
				case"á‡‚":return "á„’"+novkar;
				case"á‡«":return "á…€"+novkar;
				case"á‡°":return "á…Œ"+novkar;
				case"á‡¹":return "á…™"+novkar;
				//å…¥åŠ›éŸ»æ¯ã‚’äº’æ›ç”¨å­—æ¯ã«è®Šæ›
				default:return antaw+V_V(novkar);
			}
		}
	}
	if(0x10ff<antKod&&antKod<0x1113){//4 ç›´å‰ãŒè²æ¯
		if(0x1160<novKod&&novKod<0x11a8)return false;//41 å…¥åŠ›ãŒéŸ»æ¯
		if(0x10ff<novKod&&novKod<0x1113){//42 ç›´å‰ãƒ»å…¥åŠ›ã¨ã‚‚è²æ¯ åˆè²ã‚’åˆæˆ
			if(antaw=="á„‚"&&novkar=="á„€")return "á„“";
			if(antaw=="á„‚"&&novkar=="á„‚")return "á„”";
			if(antaw=="á„‚"&&novkar=="á„ƒ")return "á„•";
			if(antaw=="á„‚"&&novkar=="á„‡")return "á„–";
			if(antaw=="á„ƒ"&&novkar=="á„€")return "á„—";
			if(antaw=="á„…"&&novkar=="á„‚")return "á„˜";
			if(antaw=="á„…"&&novkar=="á„…")return "á„™";
			if(antaw=="á„…"&&novkar=="á„’")return "á„š";
			if(antaw=="á„…"&&novkar=="á„‹")return "á„›";
			if(antaw=="á„†"&&novkar=="á„‡")return "á„œ";
			if(antaw=="á„†"&&novkar=="á„‹")return "á„";
			if(antaw=="á„‡"&&novkar=="á„€")return "á„";
			if(antaw=="á„‡"&&novkar=="á„‚")return "á„Ÿ";
			if(antaw=="á„‡"&&novkar=="á„ƒ")return "á„ ";
			if(antaw=="á„‡"&&novkar=="á„‰")return "á„¡";
			if(antaw=="á„¡"&&novkar=="á„€")return "á„¢";
			if(antaw=="á„¡"&&novkar=="á„ƒ")return "á„£";
			if(antaw=="á„¡"&&novkar=="á„‡")return "á„¤";
			if(antaw=="á„‡"&&novkar=="á„Š")return "á„¥";
			if(antaw=="á„¡"&&novkar=="á„‰")return "á„¥";
			if(antaw=="á„¡"&&novkar=="á„Œ")return "á„¦";
			if(antaw=="á„‡"&&novkar=="á„Œ")return "á„§";
			if(antaw=="á„‡"&&novkar=="á„")return "á„¨";
			if(antaw=="á„‡"&&novkar=="á„")return "á„©";
			if(antaw=="á„‡"&&novkar=="á„‘")return "á„ª";
			if(antaw=="á„‡"&&novkar=="á„‹")return "á„«";
			if(antaw=="á„ˆ"&&novkar=="á„‹")return "á„¬";
			if(antaw=="á„‰"&&novkar=="á„€")return "á„­";
			if(antaw=="á„‰"&&novkar=="á„‚")return "á„®";
			if(antaw=="á„‰"&&novkar=="á„ƒ")return "á„¯";
			if(antaw=="á„‰"&&novkar=="á„…")return "á„°";
			if(antaw=="á„‰"&&novkar=="á„†")return "á„±";
			if(antaw=="á„‰"&&novkar=="á„‡")return "á„²";
			if(antaw=="á„²"&&novkar=="á„€")return "á„³";
			if(antaw=="á„‰"&&novkar=="á„Š")return "á„´";
			if(antaw=="á„Š"&&novkar=="á„‰")return "á„´";
			if(antaw=="á„‰"&&novkar=="á„‹")return "á„µ";
			if(antaw=="á„‰"&&novkar=="á„Œ")return "á„¶";
			if(antaw=="á„‰"&&novkar=="á„")return "á„·";
			if(antaw=="á„‰"&&novkar=="á„")return "á„¸";
			if(antaw=="á„‰"&&novkar=="á„")return "á„¹";
			if(antaw=="á„‰"&&novkar=="á„‘")return "á„º";
			if(antaw=="á„‰"&&novkar=="á„’")return "á„»";
			if(antaw=="á„¼"&&novkar=="á„¼")return "á„½";
			if(antaw=="á„¾"&&novkar=="á„¾")return "á„¿";
			if(antaw=="á„‹"&&novkar=="á„€")return "á…";
			if(antaw=="á„‹"&&novkar=="á„ƒ")return "á…‚";
			if(antaw=="á„‹"&&novkar=="á„†")return "á…ƒ";
			if(antaw=="á„‹"&&novkar=="á„‡")return "á…„";
			if(antaw=="á„‹"&&novkar=="á„‰")return "á……";
			if(antaw=="á„‹"&&novkar=="á…€")return "á…†";
			if(antaw=="á„‹"&&novkar=="á„‹")return "á…‡";
			if(antaw=="á„‹"&&novkar=="á„Œ")return "á…ˆ";
			if(antaw=="á„‹"&&novkar=="á„")return "á…‰";
			if(antaw=="á„‹"&&novkar=="á„")return "á…Š";
			if(antaw=="á„‹"&&novkar=="á„‘")return "á…‹";
			if(antaw=="á„Œ"&&novkar=="á„‹")return "á…";
			if(antaw=="á…"&&novkar=="á…")return "á…";
			if(antaw=="á…"&&novkar=="á…")return "á…‘";
			if(antaw=="á„"&&novkar=="á„")return "á…’";
			if(antaw=="á„"&&novkar=="á„’")return "á…“";
			if(antaw=="á„‘"&&novkar=="á„‡")return "á…–";
			if(antaw=="á„‘"&&novkar=="á„‹")return "á…—";
			if(antaw=="á„’"&&novkar=="á„’")return "á…˜";
			if(antaw=="á„€"&&novkar=="á„ƒ")return "á…š";
			if(antaw=="á„‚"&&novkar=="á„‰")return "á…›";
			if(antaw=="á„‚"&&novkar=="á„Œ")return "á…œ";
			if(antaw=="á„‚"&&novkar=="á„’")return "á…";
			if(antaw=="á„ƒ"&&novkar=="á„…")return "á…";//åˆè²ã“ã“ã¾ã§
			//çµ‚è²ã«ã—ã‹ãªã„çµ„åˆã‚’äº’æ›å­—æ¯ã«ç›´æ¥è®Šæ›
			if(antaw=="á„€"&&novkar=="á„‰")return "ã„³";
			if(antaw=="á„…"&&novkar=="á„")return "ã„¾";
			if(antaw=="á„…"&&novkar=="á„€")return "ã„º";
			if(antaw=="á„…"&&novkar=="á„†")return "ã„»";
			if(antaw=="á„…"&&novkar=="á„‡")return "ã„¼";
			if(antaw=="á„…"&&novkar=="á„‰")return "ã„½";
			if(antaw=="á„…"&&novkar=="á„‘")return "ã„¿";
/*ä¸ä½œå‹•*/		if(antaw=="á„‚"&&novkar=="á…€")return "ã…¨";
			if(antaw=="á„…"&&novkar=="á„ƒ")return "ã…ª";
/*ä¸ä½œå‹•*/		if(antaw=="á„…"&&novkar=="á…€")return "ã…¬";
/*ä¸ä½œå‹•*/		if(antaw=="á„…"&&novkar=="á…™")return "ã…­";
			if(antaw=="á„†"&&novkar=="á„‰")return "ã…¯";
/*ä¸ä½œå‹•*/		if(antaw=="á„†"&&novkar=="á…€")return "ã…°";
/*ä¸ä½œå‹•*/		if(antaw=="á…Œ"&&novkar=="á„‰")return "ã†‚";
/*ä¸ä½œå‹•*/		if(antaw=="á…Œ"&&novkar=="á…€")return "ã†ƒ";
			if(antaw=="á„ƒ"&&novkar=="á„†")return "ê¥ ";
			if(antaw=="á„ƒ"&&novkar=="á„‡")return "ê¥¡";
			if(antaw=="á„ƒ"&&novkar=="á„‰")return "ê¥¢";
			if(antaw=="á„ƒ"&&novkar=="á„Œ")return "ê¥£";
			if(antaw=="á„…"&&novkar=="á„")return "ê¥¥";
			if(antaw=="á„…"&&novkar=="á„ƒ")return "ê¥¦";
			if(antaw=="á„…"&&novkar=="á„„")return "ê¥§";
			if(antaw=="á„…"&&novkar=="á„ˆ")return "ê¥ª";
			if(antaw=="á„…"&&novkar=="á„Œ")return "ê¥­";
			if(antaw=="á„…"&&novkar=="á„")return "ê¥®";
			if(antaw=="á„†"&&novkar=="á„€")return "ê¥¯";
			if(antaw=="á„†"&&novkar=="á„ƒ")return "ê¥°";
			if(antaw=="á„†"&&novkar=="á„‰")return "ê¥±";
			if(antaw=="á„‡"&&novkar=="á„")return "ê¥³";
			if(antaw=="á„‡"&&novkar=="á„’")return "ê¥´";
			if(antaw=="á„Š"&&novkar=="á„‡")return "ê¥µ";
			if(antaw=="á„‹"&&novkar=="á„…")return "ê¥¶";
			if(antaw=="á„‹"&&novkar=="á„’")return "ê¥·";
			if(antaw=="á„"&&novkar=="á„’")return "ê¥¸";
			if(antaw=="á„"&&novkar=="á„")return "ê¥¹";
			if(antaw=="á„‘"&&novkar=="á„’")return "ê¥º";
			if(antaw=="á„’"&&novkar=="á„‰")return "ê¥»";
/*ä¸ä½œå‹•*/		if(antaw=="á…™"&&novkar=="á…™")return "ê¥¼";
			return antaw+novkar;
		}//ç›´å‰ãƒ»å…¥åŠ›ã¨ã‚‚è²æ¯ã“ã“ã¾ã§
	}
	//5 äº’æ›ç”¨å­—æ¯ã¨åˆè²ã®åˆæˆ
	if(antaw=="ã„º"&&novkar=="á„‰")return "ã…©";
	if(antaw=="ã„¼"&&novkar=="á„‰")return "ã…«";
	if(antaw=="ã„¼"&&novkar=="á„‹")return "ê¥«";
	if(antaw=="á„¡"&&novkar=="á„")return "ê¥²";
	//6 çµ‚è²
	if(antaw=="á†¨"&&novkar=="á„‰")return "á†ª";
	if(antaw=="á†«"&&novkar=="á„Œ")return "á†¬";
	if(antaw=="á†«"&&novkar=="á„’")return "á†­";
	if(antaw=="á†¯"&&novkar=="á„€")return "á†°";
	if(antaw=="á†¯"&&novkar=="á„†")return "á†±";
	if(antaw=="á†¯"&&novkar=="á„‡")return "á†²";
	if(antaw=="á†¯"&&novkar=="á„‰")return "á†³";
	if(antaw=="á†¯"&&novkar=="á„")return "á†´";
	if(antaw=="á†¯"&&novkar=="á„‘")return "á†µ";
	if(antaw=="á†¯"&&novkar=="á„’")return "á†¶";
	if(antaw=="á†¸"&&novkar=="á„‰")return "á†¹";
	if(antaw=="á†¨"&&novkar=="á„…")return "á‡ƒ";
	if(antaw=="á†ª"&&novkar=="á„€")return "á‡„";
	if(antaw=="á†«"&&novkar=="á„€")return "á‡…";
	if(antaw=="á†«"&&novkar=="á„ƒ")return "á‡†";
	if(antaw=="á†«"&&novkar=="á„‰")return "á‡‡";
	if(antaw=="á†«"&&novkar=="á…€")return "á‡ˆ";
	if(antaw=="á†«"&&novkar=="á„")return "á‡‰";
	if(antaw=="á†®"&&novkar=="á„€")return "á‡Š";
	if(antaw=="á†®"&&novkar=="á„…")return "á‡‹";
	if(antaw=="á‡Š"&&novkar=="á„‰")return "á‡Œ";
	if(antaw=="á†¯"&&novkar=="á„‚")return "á‡";
	if(antaw=="á†¯"&&novkar=="á„ƒ")return "á‡";
	if(antaw=="á‡"&&novkar=="á„’")return "á‡";
	if(antaw=="á†¯"&&novkar=="á„…")return "á‡";
	if(antaw=="á†±"&&novkar=="á„€")return "á‡‘";
	if(antaw=="á†±"&&novkar=="á„‰")return "á‡’";
	if(antaw=="á†²"&&novkar=="á„‰")return "á‡“";
	if(antaw=="á†²"&&novkar=="á„’")return "á‡”";
	if(antaw=="á†²"&&novkar=="á„‹")return "á‡•";
	if(antaw=="á†¯"&&novkar=="á„Š")return "á‡–";
	if(antaw=="á†³"&&novkar=="á„‰")return "á‡–";
	if(antaw=="á†¯"&&novkar=="á…€")return "á‡—";
	if(antaw=="á†¯"&&novkar=="á„")return "á‡˜";
	if(antaw=="á†¯"&&novkar=="á…™")return "á‡™";
	if(antaw=="á†·"&&novkar=="á„€")return "á‡š";
	if(antaw=="á†·"&&novkar=="á„…")return "á‡›";
	if(antaw=="á†·"&&novkar=="á„‡")return "á‡œ";
	if(antaw=="á†·"&&novkar=="á„‰")return "á‡";
	if(antaw=="á†·"&&novkar=="á„Š")return "á‡";
	if(antaw=="á‡"&&novkar=="á„‰")return "á‡";
	if(antaw=="á†·"&&novkar=="á…€")return "á‡Ÿ";
	if(antaw=="á†·"&&novkar=="á„")return "á‡ ";
	if(antaw=="á†·"&&novkar=="á„’")return "á‡¡";
	if(antaw=="á†·"&&novkar=="á„‹")return "á‡¢";
	if(antaw=="á†¸"&&novkar=="á„…")return "á‡£";
	if(antaw=="á†¸"&&novkar=="á„‘")return "á‡¤";
	if(antaw=="á†¸"&&novkar=="á„’")return "á‡¥";
	if(antaw=="á†¸"&&novkar=="á„‹")return "á‡¦";
	if(antaw=="á†º"&&novkar=="á„€")return "á‡§";
	if(antaw=="á†º"&&novkar=="á„ƒ")return "á‡¨";
	if(antaw=="á†º"&&novkar=="á„…")return "á‡©";
	if(antaw=="á†º"&&novkar=="á„‡")return "á‡ª";
	if(antaw=="á‡°"&&novkar=="á„€")return "á‡¬";
	if(antaw=="á‡°"&&novkar=="á„")return "á‡­";
	if(antaw=="á‡¬"&&novkar=="á„€")return "á‡­";
	if(antaw=="á‡°"&&novkar=="á…Œ")return "á‡®";
	if(antaw=="á‡°"&&novkar=="á„")return "á‡¯";
	if(antaw=="á‡°"&&novkar=="á„‰")return "á‡±";
	if(antaw=="á‡°"&&novkar=="á…€")return "á‡²";
	if(antaw=="á‡"&&novkar=="á„‡")return "á‡³";
	if(antaw=="á‡"&&novkar=="á„‹")return "á‡´";
	if(antaw=="á‡‚"&&novkar=="á„‚")return "á‡µ";
	if(antaw=="á‡‚"&&novkar=="á„…")return "á‡¶";
	if(antaw=="á‡‚"&&novkar=="á„†")return "á‡·";
	if(antaw=="á‡‚"&&novkar=="á„‡")return "á‡¸";
	if(antaw=="á†¨"&&novkar=="á„‚")return "á‡º";
	if(antaw=="á†¨"&&novkar=="á„‡")return "á‡»";
	if(antaw=="á†¨"&&novkar=="á„")return "á‡¼";
	if(antaw=="á†¨"&&novkar=="á„")return "á‡½";
	if(antaw=="á†¨"&&novkar=="á„’")return "á‡¾";
	if(antaw=="á†«"&&novkar=="á„‚")return "á‡¿";
	//çµ‚è²ã“ã“ã¾ã§
	return false;
}//function kombini çµ‚
let V_V=(str='',opt=0)=>{switch(str){//ä¸­è²å­—ã‚’äº’æ›ç”¨å­—æ¯ã«è®Šæ›
	//opt: 0 ä¸è©²ç•¶æ™‚ã« false ã‚’è¿”ã™ 1 str ã‚’å…¶å„˜è¿”ã™
	case"á…¡":return "ã…";
	case"á…¢":return "ã…";
	case"á…£":return "ã…‘";
	case"á…¤":return "ã…’";
	case"á…¥":return "ã…“";
	case"á…¦":return "ã…”";
	case"á…§":return "ã…•";
	case"á…¨":return "ã…–";
	case"á…©":return "ã…—";
	case"á…­":return "ã…›";
	case"á…®":return "ã…œ";
	case"á…²":return "ã… ";
	case"á…³":return "ã…¡";
	case"á…µ":return "ã…£";
	case"á†":return "ã†";
	default:return opt?str:false;
}}
let kunmeti=(str='')=>{//å­—æ¯åˆ—ã®ä¸­ã§å–®å­—ã«åˆæˆã§ãã‚‹ã‚‚ã®ã‚’åˆæˆ
	str=str.replace(/\u200c*([á„€-á„’])([á…¡-á…µ])([á†¨-á‡‚])?/g,kunmeti1);
	str=str.replace(/\u200c*([á„€-á…])(?![á…¡-á†§])/g,kunmeti2);
	return str;
}
function kunmeti1(kongruo='',p1='á„€',p2='á…¡',p3='á†§'){//å­—æ¯ã‹ã‚‰å®Œæˆå‹å–®å­—ã‚’å‡ºåŠ›
	p1=p1.codePointAt(0)-0x1100;
	p2=p2.codePointAt(0)-0x1161;
	p3=p3.codePointAt(0)-0x11a7;
	return String.fromCharCode(0xac00+p1*21*28+p2*28+p3);
}
function kunmeti2(kongruo='',p1='á„€'){//åˆè²å­—æ¯ã‚’äº’æ›ç”¨å­—æ¯ã«è®Šæ›
	switch(p1){
		case 'á„€':return 'ã„±';
		case 'á„':return 'ã„²';
		case 'á„‚':return 'ã„´';
		case 'á…œ':return 'ã„µ';
		case 'á…':return 'ã„¶';
		case 'á„ƒ':return 'ã„·';
		case 'á„„':return 'ã„¸';
		case 'á„…':return 'ã„¹';
		case 'ê¥¤':return 'ã„º';
		case 'ê¥¨':return 'ã„»';
		case 'ê¥©':return 'ã„¼';
		case 'ê¥¬':return 'ã„½';
		case 'á„š':return 'ã…€';
		case 'á„†':return 'ã…';
		case 'á„‡':return 'ã…‚';
		case 'á„ˆ':return 'ã…ƒ';
		case 'á„¡':return 'ã…„';
		case 'á„‰':return 'ã……';
		case 'á„Š':return 'ã…†';
		case 'á„‹':return 'ã…‡';
		case 'á„Œ':return 'ã…ˆ';
		case 'á„':return 'ã…‰';
		case 'á„':return 'ã…Š';
		case 'á„':return 'ã…‹';
		case 'á„':return 'ã…Œ';
		case 'á„‘':return 'ã…';
		case 'á„’':return 'ã…';
		case 'á„”':return 'ã…¥';
		case 'á„•':return 'ã…¦';
		case 'á…›':return 'ã…§';
		case 'á„œ':return 'ã…®';
		case 'á„':return 'ã…±';
		case 'á„':return 'ã…²';
		case 'á„ ':return 'ã…³';
		case 'á„¢':return 'ã…´';
		case 'á„£':return 'ã…µ';
		case 'á„§':return 'ã…¶';
		case 'á„©':return 'ã…·';
		case 'á„«':return 'ã…¸';
		case 'á„¬':return 'ã…¹';
		case 'á„­':return 'ã…º';
		case 'á„®':return 'ã…»';
		case 'á„¯':return 'ã…¼';
		case 'á„²':return 'ã…½';
		case 'á„¶':return 'ã…¾';
		case 'á…€':return 'ã…¿';
		case 'á…‡':return 'ã†€';
		case 'á…Œ':return 'ã†';
		case 'á…—':return 'ã†„';
		case 'á…˜':return 'ã†…';
		case 'á…™':return 'ã††';
		default:return p1;
	}
}//kunmeti2 çµ‚

//montriãƒ•ã‚©ãƒ¼ã‚«ã‚¹æ™‚ã®ç³»çµ±ã‹ã‚‰ã®äºŒé‡å…¥åŠ›é™¤å»å‡½æ•¸
let dedouble=()=>{setTimeout(function(){
		let montri=document.getElementById("montri");
		let pre = montri.value;
		let pos = montri.selectionStart;	
		montri.value = pre.substr(0,pos-1)+pre.substr(pos);
		montri.setSelectionRange(pos-1,pos-1);
},1);}

//sup,AltGr,spaco,h,j,k,l,x,oè™•ç†
let supre_malsupre=()=>{if(cxiSup)malsupre();else supre();}
let supre=()=>{
	klavoj=cxiAltGr?supAltGr:sup;cxiSup=1;klavaronSxangxi(klavoj);
}
let malsupre=()=>{
	klavoj=cxiAltGr?AltGr:malsup;cxiSup=0;klavaronSxangxi(klavoj);
}
let AltGre=()=>{
	if(cxiAltGr){
		klavoj = cxiSup? sup: malsup;
		cxiAltGr=0;
	} else {
		klavoj = cxiSup? supAltGr: AltGr;
		cxiAltGr=1;
	}
	klavaronSxangxi(klavoj);
}
let spaco=()=>{
	let str=cxiSup? "\u0020": "\u200c";//é›¶å¹…éæ¥åˆå­ U+200C
	let montri = document.getElementById("montri");
	let pre=montri.value;
	let pos=montri.selectionStart;
	let prepre=pre.substring(0,pos);
	//éŸ³ç¯€ã®å…¥åŠ›ãŒçµ‚ã¯ã£ãŸã®ã§å–®å­—è®Šæ›
	if(ById('kunmeti').checked)prepre=kunmeti(prepre);
	prepre=prepre.replace(/\u200c/g,'');//ä¸è¦ã«ãªã£ãŸé›¶å¹…éçµåˆå­ã‚’å‰Šé™¤
	montri.value=prepre+str+pre.substr(pos);
	pos=prepre.length+1;
	montri.setSelectionRange(pos,pos);
	if(document.activeElement.id=="montri") dedouble();
}
//ã‚«ãƒ¼ã‚½ãƒ«ç§»å‹•
//æ¶ˆã™ã€è¡Œç§»å‹•

//æ–‡å­—å…¥åŠ›çµ‚

//éµç›¤åˆ‡æ›ï¼ˆè¨€èªåˆ‡æ›, sup, AltGrï¼‰å¼•æ•¸ï¼šæ–°éµåˆ—
let klavaronSxangxi=(kl)=>{
	if(typeof(kl)=='string'){
		for(k=0;k<49;k++)ById("kl"+k).innerHTML=kl.charAt(k);
	}else if(typeof(kl)=='object'){
		for(k=0;k<49;k++)ById("kl"+k).innerHTML=kl[k];
	}
	let sp=ById("spaco").innerHTML="â£";//Spaceéµ
	//ä»¥ä¸‹äººå·®æŒ‡ä½ç½®è¡¨ç¤º
	let kl29=ById('kl29');kl29.classList.remove('hejma');
	let kl30=ById('kl30');kl30.classList.remove('hejma');
	let kl32=ById('kl32');kl32.classList.remove('hejma');
	let kl33=ById('kl33');kl33.classList.remove('hejma');
//G-KãŒãƒ›ãƒ¼ãƒ ãƒã‚¸ã‚·ãƒ§ãƒ³
//	kl30.classList.add('hejma');kl33.classList.add('hejma');break;
//F-JãŒãƒ›ãƒ¼ãƒ ãƒã‚¸ã‚·ãƒ§ãƒ³
	kl29.classList.add('hejma');kl32.classList.add('hejma');//break;
}
klavaronSxangxi(klavoj);
</script>
<noscript>JavaScript ne laboras.</noscript>

</body>
</html>
